-
  include: tests/templates/vegeta.yml

- 
  # load data
  image: sequoiatools/gideon
  command: "kv --ops {{.Scale 100}} --create 30 --get 70 --delete 10 --expire 100 --ttl 600  --hosts {{.Orchestrator}} --bucket {{.Bucket}}"

-
  # run http attacks against view with various skip param 
  foreach: "{{range $i, $skip := mkrange 0 40 10}}"
  template: attack_view
  args: "5s, 50, {{$.Orchestrator}},
         {{$.Bucket}},
         live,
         live_ratings,   
         connection_timeout=60000&inclusive_end=true&limit=6&skip={{$skip}}&stale=false"
  alias: "ViewQ{{$i}}"

-
  # save reports 
  foreach: "{{range $i, $skip := mkrange 0 3}}"
  template: save_attack_results 
  args: "ViewQ{{$i}}"
  wait: true

